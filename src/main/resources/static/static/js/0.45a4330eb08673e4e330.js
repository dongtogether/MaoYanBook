webpackJsonp([0],{YlY5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",user:{username:"",password:""},pwdType:"password",checked:!1}},mounted:function(){this.getCookie()},methods:{doLogin:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var o=t;t.$axios({url:"/login",method:"post",data:{username:t.user.username,password:t.user.password}}).then(function(e){200===e.data.code?(t.$router.push({name:"welcome",params:{user:o.user.username,pwd:o.user.password}}),1==o.checked?o.setCookie(o.user.username,o.user.password,7):(console.log("清空Cookie"),o.clearCookie())):400===e.data.code&&t.$message({message:"账号或密码错误",type:"error"})}).catch(function(e){console.log(e)})})},setCookie:function(e,t,o){var s=new Date;s.setTime(s.getTime()+864e5*o),window.document.cookie="userName="+e+";path=/;expires="+s.toGMTString(),window.document.cookie="passWord="+t+";path=/;expires="+s.toGMTString()},getCookie:function(){if(document.cookie.length>0){for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var o=e[t].split("=");"userName"==o[0]?this.user.username=o[1]:"passWord"==o[0]&&(this.user.password=o[1])}this.checked=!0}},clearCookie:function(){this.setCookie("","",-1)},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password";var e=document.getElementsByClassName("el-icon-view")[0];""==this.pwdType?e.setAttribute("style","color: #409EFF"):e.setAttribute("style","color: #c0c4cc")}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"login-page"}},[o("div",{staticClass:"loginContext"},[o("el-card",{staticStyle:{width:"400px","border-radius":"15px"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",{staticClass:"login-title"},[e._v("系统登录")])]),e._v(" "),o("el-form",{ref:"loginform",attrs:{model:e.user}},[o("el-form-item",{attrs:{label:"用户名:","label-width":"80px",prop:"username"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user",clearable:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码:","label-width":"80px",prop:"password"}},[o("label",{attrs:{slot:"label"},slot:"label"},[e._v("密    码:")]),e._v(" "),o("el-input",{staticStyle:{width:"250px"},attrs:{type:e.pwdType,placeholder:"请输入密码",clearable:"","prefix-icon":"el-icon-lock"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}},[o("i",{staticClass:"el-icon-view",attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"})])],1),e._v(" "),o("div",{staticClass:"option-box"},[o("div",{staticClass:"left-option"},[o("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("一周内自动登录")])],1),e._v(" "),o("span",{staticClass:"right-option",on:{click:e.clearCookie}},[e._v("忘记密码？")])]),e._v(" "),o("el-form-item",[o("el-button",{staticStyle:{width:"80%",background:"#505458",border:"none"},attrs:{type:"primary"},on:{click:function(t){return e.doLogin("loginform")}}},[e._v("登录")])],1)],1)],1)],1)])},staticRenderFns:[]};var a=o("VU/8")(s,r,!1,function(e){o("jdmL")},"data-v-5b9eadb6",null);t.default=a.exports},jdmL:function(e,t){}});
//# sourceMappingURL=0.45a4330eb08673e4e330.js.map